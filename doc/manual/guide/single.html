<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Jersey Request Builder Plugin 2.0.2</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>2</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#builder"><strong>3</strong><span>Making Requests</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#responses"><strong>4</strong><span>Handling Responses</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#uribuilder"><strong>5</strong><span>UriBuilder</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#upgrading"><strong>6</strong><span>Upgrading</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#changelog"><strong>7</strong><span>Changelog</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Provides the Jersey client library and a builder to simplify use of the library.</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Jersey Request Builder Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Bud Byrd</p>
                            <p><strong>Version:</strong> 2.0.2</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>2</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#builder"><strong>3</strong><span>Making Requests</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#methods"><strong>3.1</strong><span>HTTP Methods</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#simple"><strong>3.2</strong><span>Simple Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#dsl"><strong>3.3</strong><span>DSL Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#props"><strong>3.4</strong><span>Request Properties</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#responses"><strong>4</strong><span>Handling Responses</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#conversion"><strong>4.1</strong><span>Automatic Conversion</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#exceptions"><strong>4.2</strong><span>HTTP Status Exceptions</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#uribuilder"><strong>5</strong><span>UriBuilder</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#properties"><strong>5.1</strong><span>Properties</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#uribuilderexamples"><strong>5.2</strong><span>Examples</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#upgrading"><strong>6</strong><span>Upgrading</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#from_1_x_x"><strong>6.1</strong><span>From 1.x.x</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#changelog"><strong>7</strong><span>Changelog</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
The Jersey Request Builder plugin provides a <code>jerseyRequestBuilder</code> bean with DSL-based methods that allows authors to easily build and send web requests.<p class="paragraph"/>This document will serve to provide a reference of all available request configuration options, as well some examples of its usage.



<h1 id="configuration">2 Configuration</h1>
The <strong class="bold">Jersey Request Builder</strong> can be configured to apply default values, or set
a specific behavior, to each new request. These configurations can
be placed in the <code>grails-app/conf/Config.groovy</code> file.<p class="paragraph"/>These values can be overidden within specific request.<p class="paragraph"/><blockquote class="warning">
There are four configurations that declare the behavior of how the 
<strong class="bold">Jersey Request Builder</strong> returns responses, and some override the others:
<ul class="star">
<li><code>convertJson</code> will automatically convert response payloads using &#10;<code>JsonSlurper</code> if the response's <strong class="bold">content-type</strong> is JSON-compatible.</li>
<li><code>convertXML</code> will automatically convert response payloads using &#10;<code>XmlSlurper</code> if the response's <strong class="bold">content-type</strong> is XML-compatible.</li>
<li><code>binaryResponse</code> will return the response payload as a <code>byte&#91;&#93;</code>. This &#10;<strong class="bold">overrides</strong> all above behavior.</li>
<li><code>rawClientResponse</code> will return the <strong class="bold">ClientResponse</strong> Object. This &#10;<strong class="bold">overrides</strong> all above behavior.</li>
</ul><p class="paragraph"/></blockquote><p class="paragraph"/><blockquote class="warning">
If <code>useBasicAuth</code> is set, then the <code>basicAuthUserName</code> and <code>basicAuthPassword</code>
must be set for every request, either through configuration, or 
per request.<p class="paragraph"/>To override this behavior for a specific request, set
<code>useBasicAuth</code> to <code>false</code> for that request (it will not include the BasicAuth
information).
</blockquote><p class="paragraph"/>The configuration values are as follows:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Config Value</strong></th><th><strong class="bold">Datatype</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td><strong class="bold">connectionTimeout</strong></td><td><code>Integer</code></td><td>The default connection timeout &#10;(in milliseconds).</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">readTimeout</strong></td><td><code>Integer</code></td><td>The default read timeout (in milliseconds).</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">contentType</strong></td><td><code>String</code>, <code>MediaType</code></td><td>The default value of the &#10;<strong class="bold">content-type</strong> header.</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">accept</strong></td><td><code>String</code>, <code>MediaType</code></td><td>The default value of the <strong class="bold">accept</strong> header.</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">convertJson</strong></td><td><code>Boolean</code></td><td>Automatically converts JSON when the &#10;<strong class="bold">content-type</strong> in the Response header is a JSON-compatible type.</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">convertXML</strong></td><td><code>Boolean</code></td><td>Automatically converts XML when the &#10;<strong class="bold">content-type</strong> in the Response header is an XML-compatible type.</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">binaryResponse</strong></td><td><code>Boolean</code></td><td>Response payloads will be returned as &#10;<code>byte&#91;&#93;</code>.</td></tr><tr class="table-even"></tr><tr class="table-odd"><td><strong class="bold">rawClientResponse</strong></td><td><code>Boolean</code></td><td>The <strong class="bold">Jersey Request Builder</strong> will return &#10;<code>ClientResponse</code>.&#10;</td></tr><tr class="table-even"><td><strong class="bold">skipStatusCheck</strong></td><td><code>Boolean</code></td><td>If set to <code>true</code>, then the <strong class="bold">Jersey Request Builder</strong> &#10;will  <em class="italic">not</em>  throw <code>ResponseStatusException</code> on an HTTP/1.1 error code.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">followRedirects</strong></td><td><code>Boolean</code></td><td>If set to <code>true</code>, then the <strong class="bold">Jersey Request Builder</strong> &#10;will automatically follow redirects in 3xx responses.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">debug</strong></td><td><code>Boolean</code></td><td>If set to <code>true</code>, then the HTTP conversation will be &#10;printed to <strong class="bold">log4j</strong> (<strong class="bold">debug</strong> level).</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">ignoreInvalidSSL</strong></td><td><code>Boolean</code></td><td>If set to <code>true</code>, then the <strong class="bold">Jersey Request Builder</strong> &#10;will ignore invalid SSL identities.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">useBasicAuth</strong></td><td><code>Boolean</code></td><td>If set to <code>true</code>, then the <strong class="bold">Jersey Request Builder</strong> will &#10;automatically include Basic Auth in the request, provided the &#10;<code>basicAuthUserName</code> and <code>basicAuthPassword</code> are set.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">basicAuthUserName</strong></td><td><code>String</code></td><td>The BasicAuth Username.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">basicAuthPassword</strong></td><td><code>String</code></td><td>The BasicAuth Password.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">chunkSize</strong></td><td><code>Integer</code></td><td>Automatically set Chunked Encoding on the request.</td></tr><tr class="table-odd"></tr><tr class="table-even"><td><strong class="bold">encodeGzip</strong></td><td><code>Boolean</code></td><td>Automatically set GZIP Encoding on the request.</td></tr></table><p class="paragraph"/><h2>Default Configuration</h2><p class="paragraph"/><div class="code"><pre>jerseyRequestBuilder &#123;
    connectionTimeout = <span class="java&#45;keyword">null</span>
    readTimeout = <span class="java&#45;keyword">null</span><p class="paragraph"/>    contentType = <span class="java&#45;keyword">null</span>
    accept = <span class="java&#45;keyword">null</span><p class="paragraph"/>    convertJson = <span class="java&#45;keyword">true</span>
    convertXML = <span class="java&#45;keyword">true</span>
    binaryResponse = <span class="java&#45;keyword">false</span>
    rawClientResponse = <span class="java&#45;keyword">false</span><p class="paragraph"/>    skipStatusCheck = <span class="java&#45;keyword">false</span><p class="paragraph"/>    followRedirects = <span class="java&#45;keyword">true</span>
    debug = <span class="java&#45;keyword">false</span>
    ignoreInvalidSSL = <span class="java&#45;keyword">false</span><p class="paragraph"/>    useBasicAuth = <span class="java&#45;keyword">false</span>
    basicAuthUserName = <span class="java&#45;keyword">null</span>
    basicAuthPassword = <span class="java&#45;keyword">null</span><p class="paragraph"/>    chunkSize = <span class="java&#45;keyword">null</span>
    encodeGzip = <span class="java&#45;keyword">false</span>
&#125;</pre></div>



<h1 id="builder">3 Making Requests</h1>
To use the <strong class="bold">Jersey Request Builder</strong>, simply inject the <code>jerseyRequestBuilder</code> bean into any other bean managed by Spring.  Examples of managed Spring beans
include Grails controllers and services. An example follows.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.budjb<p class="paragraph"/><span class="java&#45;keyword">import</span> com.budjb.requestbuilder.JerseyRequestBuilder<p class="paragraph"/>class ExampleController &#123;
    JerseyRequestBuilder jerseyRequestBuilder<p class="paragraph"/>    def index = &#123;<p class="paragraph"/>    &#125;
&#125;</pre></div><p class="paragraph"/>To use the <strong class="bold">Jersey Request Builder</strong> in a POGO (plain old groovy object), it can be retrieved from the <code>applicationContext</code> using the Holders class as follows.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.util.Holders<p class="paragraph"/>class Example &#123;
    JerseyRequestBuilder jerseyRequestBuilder = Holders.applicationContext.getBean(<span class="java&#45;quote">"jerseyRequestBuilder"</span>)
&#125;</pre></div><p class="paragraph"/>The <strong class="bold">Jersey Request Builder</strong> can be configured and used in several ways, depending on how the author intends to use it.



<h2 id="methods">3.1 HTTP Methods</h2>
The HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html" target="blank">specification</a> defines several request <strong class="bold">methods</strong>.
Each method has a different intended use, and there are some behavior requirements around them.<p class="paragraph"/>The <strong class="bold">Jersey Request Builder</strong> supports many of these methods, as outlined below:
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Method</strong></th><th><strong class="bold">Jersey Request Builder Method</strong></th></tr><tr class="table-odd"><td>GET</td><td><code>get()</code></td></tr><tr class="table-even"><td>POST</td><td><code>post()</code></td></tr><tr class="table-odd"><td>PUT</td><td><code>put()</code></td></tr><tr class="table-even"><td>DELETE</td><td><code>delete()</code></td></tr><tr class="table-odd"><td>HEAD</td><td><code>head()</code></td></tr><tr class="table-even"><td>OPTIONS</td><td><code>options()</code></td></tr><tr class="table-odd"><td>TRACE</td><td><code>trace()</code></td></tr></table>



<h2 id="simple">3.2 Simple Usage</h2>
The simplest way to use the <strong class="bold">Jersey Request Builder</strong> is to use the convenience methods that only require a URL, and optionally the body on methods that support it. They can be used as follows:
<div class="code"><pre>// GET example
jerseyRequestBuilder.get(<span class="java&#45;quote">"http://www.example.com"</span>)<p class="paragraph"/>// POST example
jerseyRequestBuilder.post(<span class="java&#45;quote">"http://www.example.com"</span>, <span class="java&#45;quote">"payload"</span>)<p class="paragraph"/>// PUT example
jerseyRequestBuilder.put(<span class="java&#45;quote">"http://www.example.com"</span>, <span class="java&#45;quote">"payload"</span>)<p class="paragraph"/>// DELETE example
jerseyRequestBuilder.delete(<span class="java&#45;quote">"http://www.example.com"</span>)</pre></div>



<h2 id="dsl">3.3 DSL Usage</h2>
Using the DSL-style functions is the most common use of the <strong class="bold">Jersey Request Builder</strong>. These methods provide an easy to use, centralized way to build a request with varying parameters.
This documentation will not go into detail about all of the options available with the <strong class="bold">Jersey Request Builder</strong>, but all of these options are documented completely in the reference section.<p class="paragraph"/>All of the HTTP methods can use the DSL-based methods.<p class="paragraph"/><div class="code"><pre>jerseyRequestBuilder.post &#123;
    uri = <span class="java&#45;quote">"http://www.example.com"</span>
    body = &#91;<span class="java&#45;quote">"foo"</span>: <span class="java&#45;quote">"bar"</span>&#93;
    headers = &#91;
        <span class="java&#45;quote">"X&#45;Auth&#45;Key"</span>: <span class="java&#45;quote">"1321d980&#45;3ceb&#45;11e3&#45;b872&#45;081196ac8a64"</span>
    &#93;
&#125;</pre></div>



<h2 id="props">3.4 Request Properties</h2>
The <strong class="bold">Jersey Request Builder</strong> also allows the author to build a request gradually through a properties object. All of the properties that can be set inside of the
DSL-based methods can also be set directly on the properties itself.<p class="paragraph"/><div class="code"><pre>RequestProperties requestProperties = <span class="java&#45;keyword">new</span> RequestProperties()<p class="paragraph"/>requestProperties.uri = <span class="java&#45;quote">"http://www.example.com"</span>
requestProperties.accept = <span class="java&#45;quote">"text/html"</span><p class="paragraph"/>def result = jerseyRequestBuilder.get(requestProperties)</pre></div>



<h1 id="responses">4 Handling Responses</h1>
The <strong class="bold">Jersey Request Builder</strong> attempts to provide as much convenience around HTTP responses as it can, while providing options that provide direct access to the underlying objects returned from Jersey-Client.



<h2 id="conversion">4.1 Automatic Conversion</h2>
When the response to a request is received with a successful HTTP status code, by default, the response body will be converted if possible and returned from the request method.<p class="paragraph"/>These are the steps followed to determine what to return:
<ol>
<li>If <code>rawClientResponse</code> is <code>true</code>, return the Jersey-Client <a href="https://jersey.java.net/nonav/apidocs/1.8/jersey/com/sun/jersey/api/client/ClientResponse.html" target="blank"><code>ClientResponse</code></a> object.</li>
<li>If <code>binaryResponse</code> is <code>true</code>, return the response as a <code>byte</code> array.</li>
<li>If a <code>Content-Type</code> header that is JSON compatible is received and <code>convertJson</code> is <code>true</code>, convert the response to a <code>List</code> or <code>Map</code> (or <code>null</code> if the response was empty) and return it.</li>
<li>If a <code>Content-Type</code> header that is XML compatible is received and <code>convertXML</code> is <code>true</code>, convert the response using <code>XmlSlurper</code> and return it.</li>
<li>Convert the response to a <code>String</code> and return it.</li>
</ol><p class="paragraph"/>The default values for the configuration properties that affect the response conversion are:
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th></tr><tr class="table-odd"><td><code>binaryResponse</code></td><td><code>false</code></td></tr><tr class="table-even"><td><code>rawClientResponse</code></td><td><code>false</code></td></tr><tr class="table-odd"><td><code>convertJson</code></td><td><code>true</code></td></tr><tr class="table-even"><td><code>convertXML</code></td><td><code>true</code></td></tr></table><p class="paragraph"/><blockquote class="note">
The <code>OPTIONS</code> and <code>HEAD</code> methods only return a <a href="https://jersey.java.net/nonav/apidocs/1.8/jersey/com/sun/jersey/api/client/ClientResponse.html," target="blank"><code>ClientResponse</code></a> as the responses for these methods do not contain bodies.
</blockquote>



<h2 id="exceptions">4.2 HTTP Status Exceptions</h2>
The builder, by default, will do automation conversion of the message and return it if the HTTP status returned with the request is considered <strong class="bold">successful</strong>. For the purposes of the builder,
<strong class="bold">successful</strong> is defined as an HTTP status code in the 2xx range of codes (for example, 200 and 201).<p class="paragraph"/>If a non-successful HTTP status code is encountered, an exception is thrown.  Most well-known HTTP status codes are represented by an appropriately named exception, and they all
extend a common base exception <code>ResponseStatusException</code>. If a code is received that the builder does not have a named exception for, a <code>ResponseStatusException</code> is thrown.<p class="paragraph"/><blockquote class="note">
The behavior to throw an exception for a non-successful HTTP status can be disabled by setting the <code>RequestBuilder</code> property <code>skipStatusCheck</code> to <code>true</code>.
</blockquote><p class="paragraph"/>The <code>ResponseStatusException</code> contains the following:
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Description</strong></th><th><strong class="bold">Type</strong></th></tr><tr class="table-odd"><td><code>content</code></td><td>The <strong class="bold">converted</strong> response message.</td><td> <em class="italic">mixed</em> </td></tr><tr class="table-even"><td><code>logText</code></td><td>Debug log (if enabled)</td><td><code>String</code></td></tr><tr class="table-odd"><td><code>response</code></td><td>The <a href="https://jersey.java.net/nonav/apidocs/1.8/jersey/com/sun/jersey/api/client/ClientResponse.html" target="blank"><code>ClientResponse</code></a> returned from the Jersey-Client library.</td><td><code>ClientResponse</code></td></tr><tr class="table-even"><td><code>status</code></td><td>HTTP status code.</td><td><code>Integer</code></td></tr></table><p class="paragraph"/>The following named HTTP status exceptions defined by the plugin are:
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">HTTP Status Code</strong></th><th><strong class="bold">Exception</strong></th></tr><tr class="table-odd"><td><code>300</code></td><td><code>HttpMultipleChoicesException</code></td></tr><tr class="table-even"><td><code>301</code></td><td><code>HttpMovedPermanentlyException</code></td></tr><tr class="table-odd"><td><code>302</code></td><td><code>HttpFoundException</code></td></tr><tr class="table-even"><td><code>303</code></td><td><code>HttpSeeOtherException</code></td></tr><tr class="table-odd"><td><code>304</code></td><td><code>HttpNotModifiedException</code></td></tr><tr class="table-even"><td><code>305</code></td><td><code>HttpUseProxyException</code></td></tr><tr class="table-odd"><td><code>307</code></td><td><code>HttpTemporaryRedirectException</code></td></tr><tr class="table-even"><td><code>400</code></td><td><code>HttpBadRequestException</code></td></tr><tr class="table-odd"><td><code>401</code></td><td><code>HttpUnauthorizedException</code></td></tr><tr class="table-even"><td><code>402</code></td><td><code>HttpPaymentRequiredException</code></td></tr><tr class="table-odd"><td><code>403</code></td><td><code>HttpForbiddenException</code></td></tr><tr class="table-even"><td><code>404</code></td><td><code>HttpNotFoundException</code></td></tr><tr class="table-odd"><td><code>405</code></td><td><code>HttpMethodNotAllowedException</code></td></tr><tr class="table-even"><td><code>406</code></td><td><code>HttpNotAcceptableException</code></td></tr><tr class="table-odd"><td><code>407</code></td><td><code>HttpProxyAuthenticationRequiredException</code></td></tr><tr class="table-even"><td><code>408</code></td><td><code>HttpRequestTimeoutException</code></td></tr><tr class="table-odd"><td><code>409</code></td><td><code>HttpConflictException</code></td></tr><tr class="table-even"><td><code>410</code></td><td><code>HttpGoneException</code></td></tr><tr class="table-odd"><td><code>411</code></td><td><code>HttpLengthRequiredException</code></td></tr><tr class="table-even"><td><code>412</code></td><td><code>HttpPreconditionFailedException</code></td></tr><tr class="table-odd"><td><code>413</code></td><td><code>HttpRequestEntityTooLargeException</code></td></tr><tr class="table-even"><td><code>414</code></td><td><code>HttpRequestUriTooLongException</code></td></tr><tr class="table-odd"><td><code>415</code></td><td><code>HttpUnsupportedMediaTypeException</code></td></tr><tr class="table-even"><td><code>416</code></td><td><code>HttpRequestedRangeNotSatisfiableException</code></td></tr><tr class="table-odd"><td><code>417</code></td><td><code>HttpExpectationFailedException</code></td></tr><tr class="table-even"><td><code>422</code></td><td><code>HttpUnprocessableEntityException</code></td></tr><tr class="table-odd"><td><code>500</code></td><td><code>HttpInternalServerErrorException</code></td></tr><tr class="table-even"><td><code>501</code></td><td><code>HttpNotImplementedException</code></td></tr><tr class="table-odd"><td><code>502</code></td><td><code>HttpBadGatewayException</code></td></tr><tr class="table-even"><td><code>503</code></td><td><code>HttpServiceUnavailableException</code></td></tr><tr class="table-odd"><td><code>504</code></td><td><code>HttpGatewayTimeoutException</code></td></tr><tr class="table-even"><td><code>505</code></td><td><code>HttpHttpVersionNotSupportedException</code></td></tr></table>



<h1 id="uribuilder">5 UriBuilder</h1>
The plugin also provides a <code>UriBuilder</code> class to make building URLs with correct escaping simpler. This builder follows the same building conventions as the <strong class="bold">Jersey Request Builder</strong>.<p class="paragraph"/>


<h2 id="properties">5.1 Properties</h2>
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Description</strong></th><th><strong class="bold">Type</strong></th></tr><tr class="table-odd"><td><code>base</code></td><td>Base URL to start from.</td><td><code>String</code></td></tr><tr class="table-even"><td><code>host</code></td><td>Host name part of the URL.</td><td><code>String</code></td></tr><tr class="table-odd"><td><code>port</code></td><td>Remote host port number.</td><td><code>Integer</code></td></tr><tr class="table-even"><td><code>path</code></td><td>A list of path parts to add to the URL.</td><td><code>List</code></td></tr><tr class="table-odd"><td><code>query</code></td><td>A key/value pair map of query parameters to add to the URL.</td><td><code>Map</code></td></tr><tr class="table-even"><td><code>scheme</code></td><td>The protocol scheme to use (http, https, etc).</td><td><code>String</code></td></tr><tr class="table-odd"><td><code>fragment</code></td><td>Fragment part of the URL (index.html<strong class="bold">#fragment</strong>).</td><td><code>String</code></td></tr></table><p class="paragraph"/><blockquote class="note">
Note that if the <code>base</code> property is used, any of its URI parts will be overridden by any of the individual properties, if set. The exception is the <code>path</code> property, which will append
the path parts to the path of the <code>base</code> URL that was specified.
</blockquote>
<blockquote class="note">
The UriBuilder returns a <code>URI</code> object, which can be assigned to the <code>uri</code> property of the <strong class="bold">Jersey Request Builder</strong>.
</blockquote>



<h2 id="uribuilderexamples">5.2 Examples</h2>
Building a URI with the DSL-based syntax:
<div class="code"><pre>// Produces <span class="java&#45;quote">"http://grails.org/doc/2.1.1/guide/introduction.html&#35;coreFeatures"</span>
UriBuilder.build &#123;
    base = 'http://grails.org'
    path = &#91;'doc', '2.1.1', 'guide', 'introduction.html'&#93;
    fragment = 'coreFeatures'
&#125;</pre></div><p class="paragraph"/>Similarly, the URI can be built gradually:
<div class="code"><pre>// Produces <span class="java&#45;quote">"http://grails.org/doc/2.1.1/guide/introduction.html&#35;coreFeatures"</span>
UriBuilder uriBuilder = <span class="java&#45;keyword">new</span> UriBuilder()
uriBuilder.base = 'http://grails.org'
uriBuilder.path = &#91;'doc', '2.1.1', 'guide', 'introduction.html'&#93;
uriBuilder.fragment = 'coreFeatures'
uriBuilder.build()</pre></div><p class="paragraph"/><blockquote class="note">
<code>UriBuilder</code> is typically used with static <code>build</code> methods, but if the gradual method is used (as in the example above), <code>UriBuilder</code> will need to be instantiated.
</blockquote><p class="paragraph"/>The URI builder supports path substitution as a convenience feature. You can not  <em class="italic">build</em>  a URI this way, but this allows authors to use a predefined URL "pattern" to replace
path pieces with values determined at runtime. For example:
<div class="code"><pre>// Produces <span class="java&#45;quote">"http://example.com/webapp/resource/item/id/5497"</span>
UriBuilder.build(<span class="java&#45;quote">"http://example.com/webapp/resource/&#123;resource&#125;/id/&#123;id&#125;"</span>, <span class="java&#45;quote">"item"</span>, <span class="java&#45;quote">"5497"</span>)</pre></div>



<h1 id="upgrading">6 Upgrading</h1>
This document should help to upgrade to newer versions of the plugin when major changes have been introduced.



<h2 id="from_1_x_x">6.1 From 1.x.x</h2>
The plugin has been refactored to make it more easily tested and to use a Spring bean instead of unmanaged instances.<p class="paragraph"/>The <code>RequestBuilder</code> class has been deprecated, but it still functions the same as it did before.  While it no longer handles requests itself, it
hands requests off to the new <code>jerseyRequestBuilder</code> bean.  This should allow projects to migrate gradually until the <code>RequestBuilder</code> is removed
at some point in the future.<p class="paragraph"/>New projects should use the <code>jerseyRequestBuilder</code> bean going forward.  Its usage is very similar to the <code>RequestBuilder</code>, with the exception
of building a request gradually.  An example of this is:<p class="paragraph"/><div class="code"><pre>def builder = <span class="java&#45;keyword">new</span> RequestBuilder()
builder.uri = <span class="java&#45;quote">"http://example.com"</span>
def response = builder.get()</pre></div><p class="paragraph"/>The new version of the plugin introduces the <code>RequestProperties</code> object that can be passed into the <strong class="bold">Jersey Request Builder</strong> for all of its HTTP methods.
The equivalent to the code above would look like:<p class="paragraph"/><div class="code"><pre>def properties = <span class="java&#45;keyword">new</span> RequestProperties()
properties.uri = <span class="java&#45;quote">"http://example.com"</span>
def response = jerseyRequestBuilder.get(properties)</pre></div><p class="paragraph"/>Since the <code>jerseyRequestBuilder</code> bean is managed by Spring, it can be inject into any other Spring bean, such as controllers and services.  If
the request builder is needed outside of a managed Spring bean (such as files in <code>src/groovy</code>), it can be grabbed from the <code>applicationContext</code> through
the <code>Holders</code> convenience class.



<h1 id="changelog">7 Changelog</h1>
<h3>Version 2.0.2</h3>
<ul class="star">
<li>Fix issue causing the RequestProperties constructor to fail if <code>grailsApplication</code> is not defined in <code>Holders</code>.</li>
</ul><p class="paragraph"/><h3>Version 2.0.1</h3>
<ul class="star">
<li>Remove <code>jersey-server</code> as a dependency.</li>
<li>Added support for multivalued headers.</li>
<li>Added support for multivalued query parameters.</li>
<li>Added support for multivalued form fields.</li>
<li>Add methods <code>addHeader</code>, <code>addQuery</code>, and <code>addFormField</code> to <code>RequestProperties</code> to properly handle adding values as&#10;  multivalued entries.</li>
<li>Add methods <code>setHeader</code>, <code>setQuery</code>, and <code>setFormField</code> to <code>RequestProperties</code> to override existing values.</li>
</ul><p class="paragraph"/><h3>Version 2.0.0</h3>
<ul class="star">
<li>Update the jersey libraries to 1.19.</li>
<li>Deprecated the <code>RequestBuilder</code> class.</li>
<li>Introduced the <code>jerseyRequestBuilder</code> bean.</li>
<li>Introduced the <code>RequestProperties</code> object to configure requests.</li>
</ul><p class="paragraph"/><h3>Version 1.2.3</h3>
<ul class="star">
<li>Fix issue #24: responses that contain no entity were causing an exception.</li>
<li>Add travis-ci to README.</li>
</ul><p class="paragraph"/><h3>Version 1.2.2</h3>
<ul class="star">
<li>Fix problem with global defaults configuration that caused cast exceptions (thanks Aaron Brown).</li>
</ul><p class="paragraph"/><h3>Version 1.2.1</h3>
<ul class="star">
<li>Added application-wide default configuration (Aaron Brown).</li>
</ul><p class="paragraph"/><h3>Version 1.2.0</h3>
<ul class="star">
<li>Added support for automatic XML conversion (Michael Rice). This change may break code since XML was returned as a string before, and the conversion is enabled by default.</li>
</ul><p class="paragraph"/><h3>Version 1.1.4</h3>
<ul class="star">
<li>Added support for HEAD, OPTIONS, and TRACE HTTP methods.</li>
<li>Added functional tests.</li>
<li>Added GZIP support.</li>
<li>Added chunking support.</li>
</ul><p class="paragraph"/><h3>Version 1.1.3</h3>
<ul class="star">
<li>Created proper documentation for the project.</li>
<li>Force query parameters in RequestBuilder to Strings.</li>
</ul><p class="paragraph"/><h3>Version 1.1.2</h3>
<ul class="star">
<li>Removed logic to set an all-trusting SSLContext globally when the ignoreInvalidSSL option is used. This prevents a race condition where requests made at the same time an SSL-ignoring request builder is running will also ignore SSL.</li>
</ul><p class="paragraph"/><h3>Version 1.1.1</h3>
<ul class="star">
<li>Plugin has been renamed to make it less generic.</li>
</ul><p class="paragraph"/><h3>Version 1.1.0</h3>
<ul class="star">
<li>Minor revision bump in preparation for public release.</li>
</ul><p class="paragraph"/><h3>Version 1.0.19</h3>
<ul class="star">
<li>Added the raw response object to HTTP exceptions.</li>
</ul><p class="paragraph"/><h3>Version 1.0.18</h3>
<ul class="star">
<li>Added query parameter support to UriBuilder.</li>
</ul><p class="paragraph"/><h3>Version 1.0.17</h3>
<ul class="star">
<li>Fixed bug in UriBuilder that did not respect existing URL parts when passed via 'base'.</li>
</ul><p class="paragraph"/><h3>Version 1.0.16</h3>
<ul class="star">
<li>Cleaned up UriBuilder a bit to support premade query string in RequestBuilder.</li>
</ul><p class="paragraph"/><h3>Version 1.0.15</h3>
<ul class="star">
<li>Added flag that instructs Jersey whether to automatically follow redirects or not. Note that if a redirect status is encountered and not followed, an exception of the appropriate HTTP status code will be thrown.</li>
<li>In the case that a response has a JSON content type but the body is empty, null will be returned as the response when autoconversion of JSON is enabled.</li>
</ul><p class="paragraph"/><h3>Version 1.0.14</h3>
<ul class="star">
<li>Added UriBuilder and integrated it into the RequestBuilder class. UriBuilder can be used independently from RequestBuilder.</li>
</ul><p class="paragraph"/><h3>Version 1.0.13</h3>
<ul class="star">
<li>Added Jersey Server as a dependency of the plugin. It's not actually required for the plugin to work, however, when an application shares a tomcat server that  <em class="italic">is</em>  using the server library, issues occur that require server to be added to the project.</li>
</ul><p class="paragraph"/><h3>Version 1.0.12</h3>
<ul class="star">
<li>Added basic HTTP auth support.</li>
</ul><p class="paragraph"/><h3>Version 1.0.11</h3>
<ul class="star">
<li>Made request builder object stateful for reuse.</li>
<li>Added connection and read timeouts.</li>
</ul><p class="paragraph"/><h3>Version 1.0.10</h3>
<ul class="star">
<li>Added logging using log4j of the request and response. See the "debug" option.</li>
</ul><p class="paragraph"/><h3>Version 1.0.9</h3>
<ul class="star">
<li>Fix another silly bug related to JSON conversion.</li>
<li>Added lists to the JSON conversion process.</li>
</ul><p class="paragraph"/><h3>Version 1.0.8</h3>
<ul class="star">
<li>Fix order of operations problem with JSON conversion.</li>
</ul><p class="paragraph"/><h3>Version 1.0.7</h3>
<ul class="star">
<li>Also set the content-type for map to JSON conversions.</li>
</ul><p class="paragraph"/><h3>Version 1.0.6</h3>
<ul class="star">
<li>Did a check for maps in the body of a request, and convert them to JSON if maps are found.</li>
</ul><p class="paragraph"/><h3>Version 1.0.5</h3>
<ul class="star">
<li>Added cookie support.</li>
<li>Changed closure delegation mode to owner first, should make your code work more intuitively.</li>
<li>Added sub-type exceptions for http status codes.  All inherit from ResponseStatusException.</li>
</ul><p class="paragraph"/><h3>Version 1.0.4</h3>
<ul class="star">
<li>Added SSL cleanup code, fixes a bug where SSL certs are always ignored.</li>
</ul><p class="paragraph"/><h3>Version 1.0.3</h3>
<ul class="star">
<li>Added ability to ignore invalid certs.</li>
</ul><p class="paragraph"/><h3>Version 1.0.2</h3>
<ul class="star">
<li>Added content-type.</li>
</ul><p class="paragraph"/><h3>Version 1.0.1</h3>
<ul class="star">
<li>Initial release.</li>
</ul><p class="paragraph"/>

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Jersey Request Builder</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/accept.html">accept</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/basicAuthPassword.html">basicAuthPassword</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/basicAuthUserName.html">basicAuthUserName</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/binaryResponse.html">binaryResponse</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/body.html">body</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/chunkSize.html">chunkSize</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/connectionTimeout.html">connectionTimeout</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/contentType.html">contentType</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/convertJson.html">convertJson</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/convertXML.html">convertXML</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/cookies.html">cookies</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/debug.html">debug</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/delete.html">delete</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/followRedirects.html">followRedirects</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/form.html">form</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/get.html">get</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/gzip.html">gzip</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/head.html">head</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/headers.html">headers</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/ignoreInvalidSSL.html">ignoreInvalidSSL</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/options.html">options</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/post.html">post</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/put.html">put</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/query.html">query</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/rawClientResponse.html">rawClientResponse</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/readTimeout.html">readTimeout</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/skipStatusCheck.html">skipStatusCheck</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/trace.html">trace</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/uri.html">uri</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Jersey%20Request%20Builder/useBasicAuth.html">useBasicAuth</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">URI Builder</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/base.html">base</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/fragment.html">fragment</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/host.html">host</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/path.html">path</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/port.html">port</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/query.html">query</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/URI%20Builder/scheme.html">scheme</a>
                        </div>
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
